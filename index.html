<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è ‡∂Ø‡∑ö‡∂¥‡∂Ω | Sri Lanka Properties</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        .property-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
        }
        #map {
            height: 500px;
            width: 100%;
            border-radius: 0.5rem;
        }
        .admin-login {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-blue-600">üè† <span id="nav-title">‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è ‡∂Ø‡∑ö‡∂¥‡∂Ω</span></h1>
                </div>
                <div class="flex items-center space-x-4">
                    <select id="language" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option>
                        <option value="en">English</option>
                        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                    </select>
                    <button onclick="showAdminLogin()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                        <span id="admin-btn">Admin</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-4xl md:text-5xl font-bold mb-4" id="hero-title">‡∂î‡∂∂‡∑ö ‡∑É‡∑í‡∑Ñ‡∑í‡∂± ‡∂±‡∑í‡∑Ä‡∑É ‡∑É‡∑ú‡∂∫‡∑è ‡∂ú‡∂±‡∑ä‡∂±</h2>
            <p class="text-xl mb-8" id="hero-subtitle">‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è‡∑Ä‡∑ö ‡∑Ñ‡∑ú‡∂≥‡∂∏ ‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∂ë‡∂ö‡∂∏ ‡∂≠‡∑ê‡∂±‡∂ö</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- View Toggle -->
        <div class="flex justify-center mb-6 space-x-4">
            <button onclick="showListView()" id="list-view-btn" class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold">
                üìã <span id="list-view-text">‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä</span>
            </button>
            <button onclick="showMapView()" id="map-view-btn" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold">
                üó∫Ô∏è <span id="map-view-text">‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏</span>
            </button>
        </div>

        <!-- Filters -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h3 class="text-xl font-bold mb-4" id="filter-title">‡∑É‡∑ô‡∑Ä‡∑î‡∂∏‡∑ä ‡∂¥‡∑Ñ‡∑É‡∑î‡∂ö‡∂∏‡∑ä</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" id="type-label">‡∑Ä‡∂ª‡∑ä‡∂ú‡∂∫</label>
                    <select id="filter-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="all" id="all-option">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω</option>
                        <option value="sale" id="sale-option">‡∑Ä‡∑í‡∂ö‡∑í‡∂´‡∑ì‡∂∏‡∂ß</option>
                        <option value="rent" id="rent-option">‡∂ö‡∑î‡∂Ω‡∑í‡∂∫‡∂ß</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" id="property-type-label">‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∑Ä‡∂ª‡∑ä‡∂ú‡∂∫</label>
                    <select id="filter-property-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="all" id="all-property-option">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω</option>
                        <option value="house" id="house-option">‡∂±‡∑í‡∑Ä‡∑É</option>
                        <option value="apartment" id="apartment-option">‡∂∏‡∑Ñ‡∂Ω‡∑ä ‡∂±‡∑í‡∑Ä‡∑è‡∑É</option>
                        <option value="land" id="land-option">‡∂â‡∂©‡∂∏</option>
                        <option value="commercial" id="commercial-option">‡∑Ä‡∑è‡∂´‡∑í‡∂¢</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" id="location-label">‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫</label>
                    <select id="filter-location" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="all" id="all-location-option">‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å</option>
                        <option value="colombo">‡∂ö‡∑ú‡∑Ö‡∂π / Colombo</option>
                        <option value="kandy">‡∂∏‡∑Ñ‡∂±‡∑î‡∑Ä‡∂ª / Kandy</option>
                        <option value="galle">‡∂ú‡∑è‡∂Ω‡∑ä‡∂Ω / Galle</option>
                        <option value="jaffna">‡∂∫‡∑è‡∂¥‡∂±‡∂∫ / Jaffna</option>
                        <option value="negombo">‡∂∏‡∑ì‡∂ú‡∂∏‡∑î‡∑Ä / Negombo</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" id="price-label">‡∂∏‡∑í‡∂Ω ‡∂¥‡∂ª‡∑è‡∑É‡∂∫</label>
                    <select id="filter-price" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="all" id="all-price-option">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω</option>
                        <option value="0-5000000">< 50 ‡∂Ω‡∂ö‡∑ä‡∑Ç</option>
                        <option value="5000000-10000000">50-100 ‡∂Ω‡∂ö‡∑ä‡∑Ç</option>
                        <option value="10000000-20000000">1-2 ‡∂ö‡∑ù‡∂ß‡∑í</option>
                        <option value="20000000-999999999">> 2 ‡∂ö‡∑ù‡∂ß‡∑í</option>
                    </select>
                </div>
            </div>
            <button onclick="applyFilters()" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
                <span id="search-btn">‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±</span>
            </button>
        </div>

        <!-- List View -->
        <div id="list-view" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Properties will be dynamically loaded here -->
        </div>

        <!-- Map View -->
        <div id="map-view" class="hidden">
            <div id="map"></div>
        </div>
    </div>

    <!-- Property Detail Modal -->
    <div id="property-modal" class="modal">
        <div class="modal-content bg-white rounded-lg p-6 m-4 relative">
            <button onclick="closePropertyModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-3xl font-bold">&times;</button>
            <div id="property-detail-content"></div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="modal">
        <div class="bg-white rounded-lg p-8 m-4 max-w-md w-full">
            <h2 class="text-2xl font-bold mb-6 text-center" id="admin-login-title">Admin Login</h2>
            <div class="space-y-4">
                <input type="text" id="admin-username" placeholder="Username" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                <input type="password" id="admin-password" placeholder="Password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                <button onclick="adminLogin()" class="w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold">
                    <span id="login-btn">Login</span>
                </button>
                <button onclick="closeAdminLogin()" class="w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                    <span id="cancel-btn">Cancel</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div id="admin-panel-modal" class="modal">
        <div class="modal-content bg-white rounded-lg p-6 m-4 relative max-w-4xl">
            <button onclick="closeAdminPanel()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-3xl font-bold">&times;</button>
            <h2 class="text-2xl font-bold mb-6" id="admin-panel-title">‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∂ö‡∑Ö‡∂∏‡∂±‡∑è‡∂ö‡∂ª‡∂´‡∂∫</h2>
            
            <button onclick="showAddPropertyForm()" class="mb-4 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold">
                ‚ûï <span id="add-property-btn">‡∂±‡∑Ä ‡∂Ø‡∑ö‡∂¥‡∂Ω‡∂ö‡∑ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</span>
            </button>

            <div id="add-property-form" class="hidden mb-6 p-4 border border-gray-300 rounded-lg">
                <h3 class="text-xl font-bold mb-4" id="add-form-title">‡∂±‡∑Ä ‡∂Ø‡∑ö‡∂¥‡∂Ω‡∂ö‡∑ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" id="new-title-si" placeholder="‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è‡∑Ä (‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω)" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="text" id="new-title-en" placeholder="Title (English)" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="text" id="new-title-ta" placeholder="‡Æ§‡Æ≤‡Øà‡Æ™‡Øç‡Æ™‡ØÅ (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <select id="new-type" class="px-3 py-2 border border-gray-300 rounded-lg">
                        <option value="sale">‡∑Ä‡∑í‡∂ö‡∑í‡∂´‡∑ì‡∂∏‡∂ß / For Sale</option>
                        <option value="rent">‡∂ö‡∑î‡∂Ω‡∑í‡∂∫‡∂ß / For Rent</option>
                    </select>
                    <select id="new-property-type" class="px-3 py-2 border border-gray-300 rounded-lg">
                        <option value="house">‡∂±‡∑í‡∑Ä‡∑É / House</option>
                        <option value="apartment">‡∂∏‡∑Ñ‡∂Ω‡∑ä ‡∂±‡∑í‡∑Ä‡∑è‡∑É / Apartment</option>
                        <option value="land">‡∂â‡∂©‡∂∏ / Land</option>
                        <option value="commercial">‡∑Ä‡∑è‡∂´‡∑í‡∂¢ / Commercial</option>
                    </select>
                    <input type="number" id="new-price" placeholder="‡∂∏‡∑í‡∂Ω / Price (LKR)" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="text" id="new-location" placeholder="‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫ / Location" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="number" id="new-bedrooms" placeholder="‡∂±‡∑í‡∂Ø‡∂± ‡∂ö‡∑è‡∂∏‡∂ª / Bedrooms" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="number" id="new-bathrooms" placeholder="‡∂±‡∑è‡∂± ‡∂ö‡∑è‡∂∏‡∂ª / Bathrooms" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="number" id="new-sqft" placeholder="‡∑Ä‡∂ª‡∑ä‡∂ú ‡∂Ö‡∂©‡∑í / Sqft" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="number" step="0.000001" id="new-lat" placeholder="Latitude" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <input type="number" step="0.000001" id="new-lng" placeholder="Longitude" class="px-3 py-2 border border-gray-300 rounded-lg">
                    <textarea id="new-description-si" placeholder="‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª‡∂∫ (‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω)" class="col-span-2 px-3 py-2 border border-gray-300 rounded-lg" rows="3"></textarea>
                    <textarea id="new-description-en" placeholder="Description (English)" class="col-span-2 px-3 py-2 border border-gray-300 rounded-lg" rows="3"></textarea>
                    <textarea id="new-description-ta" placeholder="‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡ÆÆ‡Øç (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)" class="col-span-2 px-3 py-2 border border-gray-300 rounded-lg" rows="3"></textarea>
                    <input type="text" id="new-image" placeholder="Image URL" class="col-span-2 px-3 py-2 border border-gray-300 rounded-lg">
                </div>
                <div class="mt-4 flex space-x-4">
                    <button onclick="saveNewProperty()" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold">
                        üíæ Save
                    </button>
                    <button onclick="hideAddPropertyForm()" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-semibold">
                        Cancel
                    </button>
                </div>
            </div>

            <div id="admin-properties-list" class="space-y-4">
                <!-- Admin property list will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Inquiry Form Modal -->
    <div id="inquiry-modal" class="modal">
        <div class="bg-white rounded-lg p-8 m-4 max-w-md w-full">
            <h2 class="text-2xl font-bold mb-6" id="inquiry-title">‡∑Ä‡∑í‡∂∏‡∑É‡∑ì‡∂∏‡∑ä ‡∑Ü‡∑ù‡∂∏‡∂∫</h2>
            <div class="space-y-4">
                <input type="text" id="inquiry-name" placeholder="‡∂î‡∂∂‡∑ö ‡∂±‡∂∏ / Name" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                <input type="email" id="inquiry-email" placeholder="Email" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                <input type="tel" id="inquiry-phone" placeholder="‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫ / Phone" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                <textarea id="inquiry-message" placeholder="‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫ / Message" class="w-full px-4 py-2 border border-gray-300 rounded-lg" rows="4"></textarea>
                <button onclick="submitInquiry()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
                    üìß <span id="submit-inquiry-btn">‡∂∫‡∑Ä‡∂±‡∑ä‡∂±</span>
                </button>
                <button onclick="closeInquiryModal()" class="w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                    <span id="close-inquiry-btn">‡∑Ä‡∑É‡∂±‡∑ä‡∂±</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample Property Data
        let properties = [
            {
                id: 1,
                title: { si: "‡∑É‡∑î‡∂±‡∑ä‡∂Ø‡∂ª ‡∂±‡∑í‡∑Ä‡∑É ‡∂ö‡∑ú‡∑Ö‡∂π 7", en: "Beautiful House in Colombo 7", ta: "‡Æï‡Øä‡Æ¥‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ 7 ‡Æá‡Æ≤‡Øç ‡ÆÖ‡Æ¥‡Æï‡Ææ‡Æ© ‡Æµ‡ØÄ‡Æü‡ØÅ" },
                type: "sale",
                propertyType: "house",
                price: 15000000,
                location: "colombo",
                locationName: { si: "‡∂ö‡∑ú‡∑Ö‡∂π 7", en: "Colombo 7", ta: "‡Æï‡Øä‡Æ¥‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ 7" },
                bedrooms: 4,
                bathrooms: 3,
                sqft: 2500,
                description: {
                    si: "‡∂ö‡∑ú‡∑Ö‡∂π 7 ‡∑Ñ‡∑í ‡∂±‡∑Ä‡∑ì‡∂± ‡∂¥‡∑Ñ‡∑É‡∑î‡∂ö‡∂∏‡∑ä ‡∑É‡∑Ñ‡∑í‡∂≠ ‡∑É‡∑î‡∂±‡∑ä‡∂Ø‡∂ª ‡∂±‡∑í‡∑Ä‡∑É‡∂ö‡∑ä. ‡∂¥‡∑è‡∂ª‡∑ä‡∂ö‡∑í‡∂Ç ‡∂â‡∂©, ‡∂ã‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∂±‡∂∫ ‡∑É‡∑Ñ ‡∂Ü‡∂ª‡∂ö‡∑ä‡∑Ç‡∑è‡∑Ä ‡∂á‡∂≠.",
                    en: "Beautiful modern house in Colombo 7 with all amenities. Parking, garden, and security available.",
                    ta: "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡Æµ‡Æö‡Æ§‡Æø‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç ‡Æï‡Øä‡Æ¥‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ 7 ‡Æá‡Æ≤‡Øç ‡ÆÖ‡Æ¥‡Æï‡Ææ‡Æ© ‡Æ®‡Æµ‡ØÄ‡Æ© ‡Æµ‡ØÄ‡Æü‡ØÅ. ‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æø‡Æô‡Øç, ‡Æ§‡Øã‡Æü‡Øç‡Æü‡ÆÆ‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ."
                },
                image: "https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800",
                lat: 6.9147,
                lng: 79.8774
            },
            {
                id: 2,
                title: { si: "‡∂∏‡∑Ñ‡∂Ω‡∑ä ‡∂±‡∑í‡∑Ä‡∑è‡∑É ‡∑Ä‡∑ô‡∂Ω‡∑í‡∂ö‡∂Ø", en: "Apartment in Wellawatte", ta: "‡Æµ‡ØÜ‡Æ≤‡Æø‡Æï‡Æü‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡ÆÖ‡Æ™‡Ææ‡Æ∞‡Øç‡Æü‡Øç‡ÆÆ‡ØÜ‡Æ£‡Øç‡Æü‡Øç" },
                type: "rent",
                propertyType: "apartment",
                price: 50000,
                location: "colombo",
                locationName: { si: "‡∑Ä‡∑ô‡∂Ω‡∑í‡∂ö‡∂Ø", en: "Wellawatte", ta: "‡Æµ‡ØÜ‡Æ≤‡Æø‡Æï‡Æü‡Øà" },
                bedrooms: 2,
                bathrooms: 2,
                sqft: 1200,
                description: {
                    si: "‡∂∏‡∑î‡∑Ñ‡∑î‡∂Ø‡∑î ‡∂Ø‡∑É‡∑î‡∂±‡∂ö‡∑ä ‡∑É‡∑Ñ‡∑í‡∂≠ ‡∂±‡∑Ä‡∑ì‡∂± ‡∂∏‡∑Ñ‡∂Ω‡∑ä ‡∂±‡∑í‡∑Ä‡∑è‡∑É‡∂∫‡∂ö‡∑ä. ‡∂ö‡∑î‡∂Ω‡∑í‡∂∫ ‡∂∏‡∑è‡∑É‡∑í‡∂ö‡∑Ä ‡∂ª‡∑î. 50,000.",
                    en: "Modern apartment with sea view. Monthly rent Rs. 50,000.",
                    ta: "‡Æï‡Æü‡Æ≤‡Øç ‡Æï‡Ææ‡Æü‡Øç‡Æö‡Æø‡ÆØ‡ØÅ‡Æü‡Æ©‡Øç ‡Æ®‡Æµ‡ØÄ‡Æ© ‡ÆÖ‡Æ™‡Ææ‡Æ∞‡Øç‡Æü‡Øç‡ÆÆ‡ØÜ‡Æ£‡Øç‡Æü‡Øç. ‡ÆÆ‡Ææ‡Æ§‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞ ‡Æµ‡Ææ‡Æü‡Æï‡Øà ‡Æ∞‡ØÇ. 50,000."
                },
                image: "https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=800",
                lat: 6.8719,
                lng: 79.8585
            },
            {
                id: 3,
                title: { si: "‡∂â‡∂©‡∂∏ ‡∂∏‡∑Ñ‡∂±‡∑î‡∑Ä‡∂ª", en: "Land in Kandy", ta: "‡Æï‡Æ£‡Øç‡Æü‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æ®‡Æø‡Æ≤‡ÆÆ‡Øç" },
                type: "sale",
                propertyType: "land",
                price: 8000000,
                location: "kandy",
                locationName: { si: "‡∂∏‡∑Ñ‡∂±‡∑î‡∑Ä‡∂ª", en: "Kandy", ta: "‡Æï‡Æ£‡Øç‡Æü‡Æø" },
                bedrooms: 0,
                bathrooms: 0,
                sqft: 10000,
                description: {
                    si: "‡∂∏‡∑Ñ‡∂±‡∑î‡∑Ä‡∂ª ‡∂±‡∂ú‡∂ª‡∂∫‡∂ß ‡∂Ü‡∑É‡∂±‡∑ä‡∂±‡∑Ä ‡∂¥‡∂ª‡∑ä‡∂†‡∑É‡∑ä 25‡∂ö ‡∂â‡∂©‡∂∏‡∂ö‡∑ä. ‡∂â‡∂Ø‡∑í‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ä ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂¥‡∂ª‡∑í‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´‡∂∫‡∑í.",
                    en: "25 perches land close to Kandy city. Perfect for construction.",
                    ta: "‡Æï‡Æ£‡Øç‡Æü‡Æø ‡Æ®‡Æï‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æ∞‡ØÅ‡Æï‡Æø‡Æ≤‡Øç 25 ‡Æ™‡Æ∞‡Øç‡Æö‡Øç‡Æö‡Æ∏‡Øç ‡Æ®‡Æø‡Æ≤‡ÆÆ‡Øç. ‡Æï‡Æü‡Øç‡Æü‡ØÅ‡ÆÆ‡Ææ‡Æ©‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æè‡Æ±‡Øç‡Æ±‡Æ§‡ØÅ."
                },
                image: "https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800",
                lat: 7.2906,
                lng: 80.6337
            },
            {
                id: 4,
                title: { si: "‡∑Ä‡∑è‡∂´‡∑í‡∂¢ ‡∂ú‡∑ú‡∂©‡∂±‡∑ê‡∂ú‡∑í‡∂Ω‡∑ä‡∂Ω ‡∂ú‡∑è‡∂Ω‡∑ä‡∂Ω", en: "Commercial Building in Galle", ta: "‡Æï‡Ææ‡Æ≤‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æµ‡Æ£‡Æø‡Æï ‡Æï‡Æü‡Øç‡Æü‡Æø‡Æü‡ÆÆ‡Øç" },
                type: "sale",
                propertyType: "commercial",
                price: 25000000,
                location: "galle",
                locationName: { si: "‡∂ú‡∑è‡∂Ω‡∑ä‡∂Ω", en: "Galle", ta: "‡Æï‡Ææ‡Æ≤‡Æø" },
                bedrooms: 0,
                bathrooms: 4,
                sqft: 4000,
                description: {
                    si: "‡∂ú‡∑è‡∂Ω‡∑ä‡∂Ω ‡∂ö‡∑ú‡∂ß‡∑î‡∑Ä ‡∂Ö‡∑É‡∂Ω‡∑í‡∂±‡∑ä ‡∂≠‡∂ß‡∑ä‡∂ß‡∑î 3‡∂ö ‡∑Ä‡∑è‡∂´‡∑í‡∂¢ ‡∂ú‡∑ú‡∂©‡∂±‡∑ê‡∂ú‡∑í‡∂Ω‡∑ä‡∂Ω‡∂ö‡∑ä. ‡∑Ä‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∑è‡∂ª ‡∑É‡∂≥‡∑Ñ‡∑è ‡∑Ñ‡∑ú‡∂≥‡∂∫‡∑í.",
                    en: "3-storey commercial building near Galle Fort. Good for business.",
                    ta: "‡Æï‡Ææ‡Æ≤‡Æø ‡Æï‡Øã‡Æü‡Øç‡Æü‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æ∞‡ØÅ‡Æï‡Æø‡Æ≤‡Øç 3 ‡ÆÆ‡Ææ‡Æü‡Æø ‡Æµ‡Æ£‡Æø‡Æï ‡Æï‡Æü‡Øç‡Æü‡Æø‡Æü‡ÆÆ‡Øç. ‡Æµ‡Æ£‡Æø‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æ®‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ."
                },
                image: "https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800",
                lat: 6.0535,
                lng: 80.2210
            },
            {
                id: 5,
                title: { si: "‡∑É‡∑î‡∂õ‡∑ù‡∂¥‡∂∑‡∑ù‡∂ú‡∑ì ‡∑Ä‡∑í‡∂Ω‡∑è ‡∂∏‡∑ì‡∂ú‡∂∏‡∑î‡∑Ä", en: "Luxury Villa in Negombo", ta: "‡Æ®‡ØÄ‡Æ∞‡Øç‡Æï‡Øä‡Æ¥‡ØÅ‡ÆÆ‡Øç‡Æ™‡Æø‡Æ≤‡Øç ‡ÆÜ‡Æü‡ÆÆ‡Øç‡Æ™‡Æ∞ ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Ææ" },
                type: "rent",
                propertyType: "house",
                price: 150000,
                location: "negombo",
                locationName: { si: "‡∂∏‡∑ì‡∂ú‡∂∏‡∑î‡∑Ä", en: "Negombo", ta: "‡Æ®‡ØÄ‡Æ∞‡Øç‡Æï‡Øä‡Æ¥‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ" },
                bedrooms: 5,
                bathrooms: 4,
                sqft: 3500,
                description: {
                    si: "‡∂∏‡∑î‡∑Ñ‡∑î‡∂Ø‡∑î ‡∂≠‡∑ì‡∂ª‡∂∫‡∂ß ‡∂Ü‡∑É‡∂±‡∑ä‡∂± ‡∑É‡∑î‡∂õ‡∑ù‡∂¥‡∂∑‡∑ù‡∂ú‡∑ì ‡∑Ä‡∑í‡∂Ω‡∑è. ‡∂¥‡∑û‡∂Ø‡∑ä‡∂ú‡∂Ω‡∑í‡∂ö ‡∂≠‡∂ß‡∑è‡∂ö‡∂∫‡∂ö‡∑ä ‡∑É‡∑Ñ‡∑í‡∂≠.",
                    en: "Luxury villa close to beach. With private pool.",
                    ta: "‡Æï‡Æü‡Æ±‡Øç‡Æï‡Æ∞‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æ∞‡ØÅ‡Æï‡Æø‡Æ≤‡Øç ‡ÆÜ‡Æü‡ÆÆ‡Øç‡Æ™‡Æ∞ ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Ææ. ‡Æ§‡Æ©‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æ®‡ØÄ‡Æö‡Øç‡Æö‡Æ≤‡Øç ‡Æï‡ØÅ‡Æ≥‡Æ§‡Øç‡Æ§‡ØÅ‡Æü‡Æ©‡Øç."
                },
                image: "https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800",
                lat: 7.2008,
                lng: 79.8358
            },
            {
                id: 6,
                title: { si: "‡∂±‡∑í‡∑Ä‡∑É ‡∂∫‡∑è‡∂¥‡∂±‡∂∫", en: "House in Jaffna", ta: "‡ÆØ‡Ææ‡Æ¥‡Øç‡Æ™‡Øç‡Æ™‡Ææ‡Æ£‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æµ‡ØÄ‡Æü‡ØÅ" },
                type: "sale",
                propertyType: "house",
                price: 12000000,
                location: "jaffna",
                locationName: { si: "‡∂∫‡∑è‡∂¥‡∂±‡∂∫", en: "Jaffna", ta: "‡ÆØ‡Ææ‡Æ¥‡Øç‡Æ™‡Øç‡Æ™‡Ææ‡Æ£‡ÆÆ‡Øç" },
                bedrooms: 3,
                bathrooms: 2,
                sqft: 1800,
                description: {
                    si: "‡∂∫‡∑è‡∂¥‡∂±‡∂∫ ‡∂±‡∂ú‡∂ª ‡∂∏‡∂∞‡∑ä‚Äç‡∂∫‡∂∫‡∑ö ‡∂±‡∑Ä ‡∂±‡∑í‡∑Ä‡∑É‡∂ö‡∑ä. ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑É‡∑ä‡∂≠ ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∂ö.",
                    en: "New house in Jaffna city center. Prime location.",
                    ta: "‡ÆØ‡Ææ‡Æ¥‡Øç‡Æ™‡Øç‡Æ™‡Ææ‡Æ£ ‡Æ®‡Æï‡Æ∞ ‡ÆÆ‡Øà‡ÆØ‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æµ‡ØÄ‡Æü‡ØÅ. ‡ÆÆ‡ØÅ‡Æ§‡Æ©‡Øç‡ÆÆ‡Øà ‡Æá‡Æü‡ÆÆ‡Øç."
                },
                image: "https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800",
                lat: 9.6615,
                lng: 80.0255
            }
        ];

        let currentLanguage = 'si';
        let map = null;
        let markers = [];
        let filteredProperties = [...properties];
        let currentPropertyIdForInquiry = null;

        // Translations
        const translations = {
            si: {
                navTitle: "‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è ‡∂Ø‡∑ö‡∂¥‡∂Ω",
                heroTitle: "‡∂î‡∂∂‡∑ö ‡∑É‡∑í‡∑Ñ‡∑í‡∂± ‡∂±‡∑í‡∑Ä‡∑É ‡∑É‡∑ú‡∂∫‡∑è ‡∂ú‡∂±‡∑ä‡∂±",
                heroSubtitle: "‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è‡∑Ä‡∑ö ‡∑Ñ‡∑ú‡∂≥‡∂∏ ‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∂ë‡∂ö‡∂∏ ‡∂≠‡∑ê‡∂±‡∂ö",
                listView: "‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä",
                mapView: "‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏",
                filterTitle: "‡∑É‡∑ô‡∑Ä‡∑î‡∂∏‡∑ä ‡∂¥‡∑Ñ‡∑É‡∑î‡∂ö‡∂∏‡∑ä",
                typeLabel: "‡∑Ä‡∂ª‡∑ä‡∂ú‡∂∫",
                allOption: "‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω",
                saleOption: "‡∑Ä‡∑í‡∂ö‡∑í‡∂´‡∑ì‡∂∏‡∂ß",
                rentOption: "‡∂ö‡∑î‡∂Ω‡∑í‡∂∫‡∂ß",
                propertyTypeLabel: "‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∑Ä‡∂ª‡∑ä‡∂ú‡∂∫",
                allPropertyOption: "‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω",
                houseOption: "‡∂±‡∑í‡∑Ä‡∑É",
                apartmentOption: "‡∂∏‡∑Ñ‡∂Ω‡∑ä ‡∂±‡∑í‡∑Ä‡∑è‡∑É",
                landOption: "‡∂â‡∂©‡∂∏",
                commercialOption: "‡∑Ä‡∑è‡∂´‡∑í‡∂¢",
                locationLabel: "‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫",
                allLocationOption: "‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å",
                priceLabel: "‡∂∏‡∑í‡∂Ω ‡∂¥‡∂ª‡∑è‡∑É‡∂∫",
                allPriceOption: "‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω",
                searchBtn: "‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±",
                forSale: "‡∑Ä‡∑í‡∂ö‡∑í‡∂´‡∑ì‡∂∏‡∂ß",
                forRent: "‡∂ö‡∑î‡∂Ω‡∑í‡∂∫‡∂ß",
                bedrooms: "‡∂±‡∑í‡∂Ø‡∂± ‡∂ö‡∑è‡∂∏‡∂ª",
                bathrooms: "‡∂±‡∑è‡∂± ‡∂ö‡∑è‡∂∏‡∂ª",
                sqft: "‡∑Ä‡∂ª‡∑ä‡∂ú ‡∂Ö‡∂©‡∑í",
                viewDetails: "‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±",
                inquire: "‡∑Ä‡∑í‡∂∏‡∑É‡∂±‡∑ä‡∂±",
                whatsapp: "WhatsApp",
                adminBtn: "Admin",
                adminLoginTitle: "Admin Login",
                loginBtn: "Login",
                cancelBtn: "Cancel",
                adminPanelTitle: "‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∂ö‡∑Ö‡∂∏‡∂±‡∑è‡∂ö‡∂ª‡∂´‡∂∫",
                addPropertyBtn: "‡∂±‡∑Ä ‡∂Ø‡∑ö‡∂¥‡∂Ω‡∂ö‡∑ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±",
                inquiryTitle: "‡∑Ä‡∑í‡∂∏‡∑É‡∑ì‡∂∏‡∑ä ‡∑Ü‡∑ù‡∂∏‡∂∫",
                submitInquiryBtn: "‡∂∫‡∑Ä‡∂±‡∑ä‡∂±",
                closeInquiryBtn: "‡∑Ä‡∑É‡∂±‡∑ä‡∂±"
            },
            en: {
                navTitle: "Sri Lanka Properties",
                heroTitle: "Find Your Dream Home",
                heroSubtitle: "Best Properties in Sri Lanka in One Place",
                listView: "List View",
                mapView: "Map View",
                filterTitle: "Search Filters",
                typeLabel: "Type",
                allOption: "All",
                saleOption: "For Sale",
                rentOption: "For Rent",
                propertyTypeLabel: "Property Type",
                allPropertyOption: "All",
                houseOption: "House",
                apartmentOption: "Apartment",
                landOption: "Land",
                commercialOption: "Commercial",
                locationLabel: "Location",
                allLocationOption: "All Locations",
                priceLabel: "Price Range",
                allPriceOption: "All",
                searchBtn: "Search",
                forSale: "For Sale",
                forRent: "For Rent",
                bedrooms: "Bedrooms",
                bathrooms: "Bathrooms",
                sqft: "Sqft",
                viewDetails: "View Details",
                inquire: "Inquire",
                whatsapp: "WhatsApp",
                adminBtn: "Admin",
                adminLoginTitle: "Admin Login",
                loginBtn: "Login",
                cancelBtn: "Cancel",
                adminPanelTitle: "Property Management",
                addPropertyBtn: "Add New Property",
                inquiryTitle: "Inquiry Form",
                submitInquiryBtn: "Submit",
                closeInquiryBtn: "Close"
            },
            ta: {
                navTitle: "‡Æá‡Æ≤‡Æô‡Øç‡Æï‡Øà ‡Æö‡Øä‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Æ≥‡Øç",
                heroTitle: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Æ©‡Æµ‡ØÅ ‡Æµ‡ØÄ‡Æü‡Øç‡Æü‡Øà‡Æï‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç",
                heroSubtitle: "‡Æá‡Æ≤‡Æô‡Øç‡Æï‡Øà‡ÆØ‡Æø‡Æ©‡Øç ‡Æö‡Æø‡Æ±‡Æ®‡Øç‡Æ§ ‡Æö‡Øä‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Æ≥‡Øç ‡Æí‡Æ∞‡Øá ‡Æá‡Æü‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç",
                listView: "‡Æ™‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Æ≤‡Øç ‡Æï‡Ææ‡Æü‡Øç‡Æö‡Æø",
                mapView: "‡Æµ‡Æ∞‡Øà‡Æ™‡Æü ‡Æï‡Ææ‡Æü‡Øç‡Æö‡Æø",
                filterTitle: "‡Æ§‡Øá‡Æü‡Æ≤‡Øç ‡Æµ‡Æü‡Æø‡Æï‡Æü‡Øç‡Æü‡Æø‡Æï‡Æ≥‡Øç",
                typeLabel: "‡Æµ‡Æï‡Øà",
                allOption: "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ‡ÆÆ‡Øç",
                saleOption: "‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà‡Æï‡Øç‡Æï‡ØÅ",
                rentOption: "‡Æµ‡Ææ‡Æü‡Æï‡Øà‡Æï‡Øç‡Æï‡ØÅ",
                propertyTypeLabel: "‡Æö‡Øä‡Æ§‡Øç‡Æ§‡ØÅ ‡Æµ‡Æï‡Øà",
                allPropertyOption: "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ‡ÆÆ‡Øç",
                houseOption: "‡Æµ‡ØÄ‡Æü‡ØÅ",
                apartmentOption: "‡ÆÖ‡Æ™‡Ææ‡Æ∞‡Øç‡Æü‡Øç‡ÆÆ‡ØÜ‡Æ£‡Øç‡Æü‡Øç",
                landOption: "‡Æ®‡Æø‡Æ≤‡ÆÆ‡Øç",
                commercialOption: "‡Æµ‡Æ£‡Æø‡Æï",
                locationLabel: "‡Æá‡Æü‡ÆÆ‡Øç",
                allLocationOption: "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡Æá‡Æü‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡ÆÆ‡Øç",
                priceLabel: "‡Æµ‡Æø‡Æ≤‡Øà ‡Æµ‡Æ∞‡ÆÆ‡Øç‡Æ™‡ØÅ",
                allPriceOption: "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ‡ÆÆ‡Øç",
                searchBtn: "‡Æ§‡Øá‡Æü‡ØÅ",
                forSale: "‡Æµ‡Æø‡Æ±‡Øç‡Æ™‡Æ©‡Øà‡Æï‡Øç‡Æï‡ØÅ",
                forRent: "‡Æµ‡Ææ‡Æü‡Æï‡Øà‡Æï‡Øç‡Æï‡ØÅ",
                bedrooms: "‡Æ™‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Øà‡ÆØ‡Æ±‡Øà‡Æï‡Æ≥‡Øç",
                bathrooms: "‡Æï‡ØÅ‡Æ≥‡Æø‡ÆØ‡Æ≤‡Æ±‡Øà‡Æï‡Æ≥‡Øç",
                sqft: "‡Æö‡Æ§‡ØÅ‡Æ∞ ‡ÆÖ‡Æü‡Æø",
                viewDetails: "‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï",
                inquire: "‡Æµ‡Æø‡Æö‡Ææ‡Æ∞‡Æø‡Æï‡Øç‡Æï",
                whatsapp: "WhatsApp",
                adminBtn: "Admin",
                adminLoginTitle: "Admin Login",
                loginBtn: "Login",
                cancelBtn: "Cancel",
                adminPanelTitle: "‡Æö‡Øä‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÆ‡Øá‡Æ≤‡Ææ‡Æ£‡Øç‡ÆÆ‡Øà",
                addPropertyBtn: "‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æö‡Øä‡Æ§‡Øç‡Æ§‡Øà‡Æö‡Øç ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                inquiryTitle: "‡Æµ‡Æø‡Æö‡Ææ‡Æ∞‡Æ£‡Øà ‡Æ™‡Æü‡Æø‡Æµ‡ÆÆ‡Øç",
                submitInquiryBtn: "‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                closeInquiryBtn: "‡ÆÆ‡ØÇ‡Æü‡ØÅ"
            }
        };

        // Language Change Handler
        document.getElementById('language').addEventListener('change', function() {
            currentLanguage = this.value;
            updateLanguage();
        });

        function updateLanguage() {
            const t = translations[currentLanguage];
            document.getElementById('nav-title').textContent = t.navTitle;
            document.getElementById('hero-title').textContent = t.heroTitle;
            document.getElementById('hero-subtitle').textContent = t.heroSubtitle;
            document.getElementById('list-view-text').textContent = t.listView;
            document.getElementById('map-view-text').textContent = t.mapView;
            document.getElementById('filter-title').textContent = t.filterTitle;
            document.getElementById('type-label').textContent = t.typeLabel;
            document.getElementById('all-option').textContent = t.allOption;
            document.getElementById('sale-option').textContent = t.saleOption;
            document.getElementById('rent-option').textContent = t.rentOption;
            document.getElementById('property-type-label').textContent = t.propertyTypeLabel;
            document.getElementById('all-property-option').textContent = t.allPropertyOption;
            document.getElementById('house-option').textContent = t.houseOption;
            document.getElementById('apartment-option').textContent = t.apartmentOption;
            document.getElementById('land-option').textContent = t.landOption;
            document.getElementById('commercial-option').textContent = t.commercialOption;
            document.getElementById('location-label').textContent = t.locationLabel;
            document.getElementById('all-location-option').textContent = t.allLocationOption;
            document.getElementById('price-label').textContent = t.priceLabel;
            document.getElementById('all-price-option').textContent = t.allPriceOption;
            document.getElementById('search-btn').textContent = t.searchBtn;
            document.getElementById('admin-btn').textContent = t.adminBtn;
            document.getElementById('admin-login-title').textContent = t.adminLoginTitle;
            document.getElementById('login-btn').textContent = t.loginBtn;
            document.getElementById('cancel-btn').textContent = t.cancelBtn;
            document.getElementById('admin-panel-title').textContent = t.adminPanelTitle;
            document.getElementById('add-property-btn').textContent = t.addPropertyBtn;
            document.getElementById('inquiry-title').textContent = t.inquiryTitle;
            document.getElementById('submit-inquiry-btn').textContent = t.submitInquiryBtn;
            document.getElementById('close-inquiry-btn').textContent = t.closeInquiryBtn;
            
            renderProperties();
        }

        // Render Properties
        function renderProperties() {
            const listView = document.getElementById('list-view');
            listView.innerHTML = '';
            
            const t = translations[currentLanguage];
            
            filteredProperties.forEach(property => {
                const card = document.createElement('div');
                card.className = 'property-card bg-white rounded-lg shadow-md overflow-hidden cursor-pointer';
                card.onclick = () => showPropertyDetail(property.id);
                
                const priceFormatted = new Intl.NumberFormat('en-LK', {
                    style: 'currency',
                    currency: 'LKR',
                    minimumFractionDigits: 0
                }).format(property.price);
                
                card.innerHTML = `
                    <img src="${property.image}" alt="${property.title[currentLanguage]}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold text-gray-800">${property.title[currentLanguage]}</h3>
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${property.type === 'sale' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'}">
                                ${property.type === 'sale' ? t.forSale : t.forRent}
                            </span>
                        </div>
                        <p class="text-2xl font-bold text-blue-600 mb-2">${priceFormatted}</p>
                        <p class="text-gray-600 mb-3">üìç ${property.locationName[currentLanguage]}</p>
                        ${property.bedrooms > 0 ? `
                        <div class="flex space-x-4 text-sm text-gray-600 mb-3">
                            <span>üõèÔ∏è ${property.bedrooms} ${t.bedrooms}</span>
                            <span>üöø ${property.bathrooms} ${t.bathrooms}</span>
                            <span>üìê ${property.sqft} ${t.sqft}</span>
                        </div>
                        ` : `
                        <div class="flex space-x-4 text-sm text-gray-600 mb-3">
                            <span>üìê ${property.sqft} ${t.sqft}</span>
                        </div>
                        `}
                        <button class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
                            ${t.viewDetails}
                        </button>
                    </div>
                `;
                
                listView.appendChild(card);
            });
        }

        // Show Property Detail
        function showPropertyDetail(id) {
            const property = properties.find(p => p.id === id);
            if (!property) return;
            
            const t = translations[currentLanguage];
            const priceFormatted = new Intl.NumberFormat('en-LK', {
                style: 'currency',
                currency: 'LKR',
                minimumFractionDigits: 0
            }).format(property.price);
            
            const content = document.getElementById('property-detail-content');
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <img src="${property.image}" alt="${property.title[currentLanguage]}" class="w-full rounded-lg">
                    </div>
                    <div>
                        <div class="flex justify-between items-start mb-4">
                            <h2 class="text-3xl font-bold text-gray-800">${property.title[currentLanguage]}</h2>
                            <span class="px-4 py-2 rounded-full text-sm font-semibold ${property.type === 'sale' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'}">
                                ${property.type === 'sale' ? t.forSale : t.forRent}
                            </span>
                        </div>
                        <p class="text-3xl font-bold text-blue-600 mb-4">${priceFormatted}</p>
                        <p class="text-lg text-gray-600 mb-4">üìç ${property.locationName[currentLanguage]}</p>
                        ${property.bedrooms > 0 ? `
                        <div class="grid grid-cols-3 gap-4 mb-6">
                            <div class="text-center p-3 bg-gray-100 rounded-lg">
                                <div class="text-2xl mb-1">üõèÔ∏è</div>
                                <div class="font-semibold">${property.bedrooms}</div>
                                <div class="text-sm text-gray-600">${t.bedrooms}</div>
                            </div>
                            <div class="text-center p-3 bg-gray-100 rounded-lg">
                                <div class="text-2xl mb-1">üöø</div>
                                <div class="font-semibold">${property.bathrooms}</div>
                                <div class="text-sm text-gray-600">${t.bathrooms}</div>
                            </div>
                            <div class="text-center p-3 bg-gray-100 rounded-lg">
                                <div class="text-2xl mb-1">üìê</div>
                                <div class="font-semibold">${property.sqft}</div>
                                <div class="text-sm text-gray-600">${t.sqft}</div>
                            </div>
                        </div>
                        ` : `
                        <div class="mb-6">
                            <div class="text-center p-3 bg-gray-100 rounded-lg inline-block">
                                <div class="text-2xl mb-1">üìê</div>
                                <div class="font-semibold">${property.sqft}</div>
                                <div class="text-sm text-gray-600">${t.sqft}</div>
                            </div>
                        </div>
                        `}
                        <p class="text-gray-700 mb-6">${property.description[currentLanguage]}</p>
                        <div class="space-y-3">
                            <button onclick="showInquiryForm(${property.id})" class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
                                üìß ${t.inquire}
                            </button>
                            <a href="https://wa.me/94771234567?text=${encodeURIComponent('Hi, I am interested in: ' + property.title.en)}" target="_blank" class="block w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-center">
                                üí¨ ${t.whatsapp}
                            </a>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('property-modal').classList.add('active');
        }

        function closePropertyModal() {
            document.getElementById('property-modal').classList.remove('active');
        }

        // Inquiry Form
        function showInquiryForm(propertyId) {
            currentPropertyIdForInquiry = propertyId;
            closePropertyModal();
            document.getElementById('inquiry-modal').classList.add('active');
        }

        function closeInquiryModal() {
            document.getElementById('inquiry-modal').classList.remove('active');
            document.getElementById('inquiry-name').value = '';
            document.getElementById('inquiry-email').value = '';
            document.getElementById('inquiry-phone').value = '';
            document.getElementById('inquiry-message').value = '';
        }

        function submitInquiry() {
            const name = document.getElementById('inquiry-name').value;
            const email = document.getElementById('inquiry-email').value;
            const phone = document.getElementById('inquiry-phone').value;
            const message = document.getElementById('inquiry-message').value;
            
            if (!name || !email || !phone) {
                alert('Please fill all required fields / ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫ ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∂¥‡∑î‡∂ª‡∑Ä‡∂±‡∑ä‡∂±');
                return;
            }
            
            const property = properties.find(p => p.id === currentPropertyIdForInquiry);
            
            // In a real application, this would send to a backend
            console.log('Inquiry submitted:', { name, email, phone, message, property: property.title.en });
            alert('Thank you! We will contact you soon. / ‡∑É‡∑ä‡∂≠‡∑ñ‡∂≠‡∑í‡∂∫‡∑í! ‡∂Ö‡∂¥‡∑í ‡∂â‡∂ö‡∑ä‡∂∏‡∂±‡∑í‡∂±‡∑ä ‡∂î‡∂∂‡∑Ä ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∂ö‡∂ª‡∂∏‡∑î.');
            closeInquiryModal();
        }

        // Filters
        function applyFilters() {
            const type = document.getElementById('filter-type').value;
            const propertyType = document.getElementById('filter-property-type').value;
            const location = document.getElementById('filter-location').value;
            const priceRange = document.getElementById('filter-price').value;
            
            filteredProperties = properties.filter(property => {
                let match = true;
                
                if (type !== 'all' && property.type !== type) match = false;
                if (propertyType !== 'all' && property.propertyType !== propertyType) match = false;
                if (location !== 'all' && property.location !== location) match = false;
                
                if (priceRange !== 'all') {
                    const [min, max] = priceRange.split('-').map(Number);
                    if (property.price < min || property.price > max) match = false;
                }
                
                return match;
            });
            
            renderProperties();
            if (map) {
                updateMapMarkers();
            }
        }

        // View Toggle
        function showListView() {
            document.getElementById('list-view').classList.remove('hidden');
            document.getElementById('map-view').classList.add('hidden');
            document.getElementById('list-view-btn').className = 'px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold';
            document.getElementById('map-view-btn').className = 'px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold';
        }

        function showMapView() {
            document.getElementById('list-view').classList.add('hidden');
            document.getElementById('map-view').classList.remove('hidden');
            document.getElementById('list-view-btn').className = 'px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold';
            document.getElementById('map-view-btn').className = 'px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold';
            
            if (!map) {
                initMap();
            }
        }

        // Map Functions
        function initMap() {
            map = L.map('map').setView([7.8731, 80.7718], 8);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            updateMapMarkers();
        }

        function updateMapMarkers() {
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];
            
            filteredProperties.forEach(property => {
                const marker = L.marker([property.lat, property.lng]).addTo(map);
                const priceFormatted = new Intl.NumberFormat('en-LK', {
                    style: 'currency',
                    currency: 'LKR',
                    minimumFractionDigits: 0
                }).format(property.price);
                
                marker.bindPopup(`
                    <div class="text-center">
                        <img src="${property.image}" style="width: 200px; height: 120px; object-fit: cover; border-radius: 0.5rem; margin-bottom: 0.5rem;">
                        <h3 class="font-bold">${property.title[currentLanguage]}</h3>
                        <p class="text-blue-600 font-bold">${priceFormatted}</p>
                        <button onclick="showPropertyDetail(${property.id})" class="mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm">
                            ${translations[currentLanguage].viewDetails}
                        </button>
                    </div>
                `);
                
                markers.push(marker);
            });
        }

        // Admin Functions
        function showAdminLogin() {
            document.getElementById('admin-login-modal').classList.add('active');
        }

        function closeAdminLogin() {
            document.getElementById('admin-login-modal').classList.remove('active');
        }

        function adminLogin() {
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            // Simple authentication (in real app, use proper backend authentication)
            if (username === 'admin' && password === 'admin123') {
                closeAdminLogin();
                showAdminPanel();
            } else {
                alert('Invalid credentials! / ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª!');
            }
        }

        function showAdminPanel() {
            loadAdminProperties();
            document.getElementById('admin-panel-modal').classList.add('active');
        }

        function closeAdminPanel() {
            document.getElementById('admin-panel-modal').classList.remove('active');
        }

        function loadAdminProperties() {
            const list = document.getElementById('admin-properties-list');
            list.innerHTML = '';
            
            properties.forEach(property => {
                const item = document.createElement('div');
                item.className = 'bg-gray-100 p-4 rounded-lg flex justify-between items-center';
                item.innerHTML = `
                    <div>
                        <h4 class="font-bold">${property.title.en}</h4>
                        <p class="text-sm text-gray-600">${property.locationName.en} - ${property.type === 'sale' ? 'For Sale' : 'For Rent'}</p>
                    </div>
                    <button onclick="deleteProperty(${property.id})" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                        üóëÔ∏è Delete
                    </button>
                `;
                list.appendChild(item);
            });
        }

        function showAddPropertyForm() {
            document.getElementById('add-property-form').classList.remove('hidden');
        }

        function hideAddPropertyForm() {
            document.getElementById('add-property-form').classList.add('hidden');
        }

        function saveNewProperty() {
            const newProperty = {
                id: properties.length + 1,
                title: {
                    si: document.getElementById('new-title-si').value,
                    en: document.getElementById('new-title-en').value,
                    ta: document.getElementById('new-title-ta').value
                },
                type: document.getElementById('new-type').value,
                propertyType: document.getElementById('new-property-type').value,
                price: parseInt(document.getElementById('new-price').value),
                location: document.getElementById('new-location').value.toLowerCase(),
                locationName: {
                    si: document.getElementById('new-location').value,
                    en: document.getElementById('new-location').value,
                    ta: document.getElementById('new-location').value
                },
                bedrooms: parseInt(document.getElementById('new-bedrooms').value) || 0,
                bathrooms: parseInt(document.getElementById('new-bathrooms').value) || 0,
                sqft: parseInt(document.getElementById('new-sqft').value),
                description: {
                    si: document.getElementById('new-description-si').value,
                    en: document.getElementById('new-description-en').value,
                    ta: document.getElementById('new-description-ta').value
                },
                image: document.getElementById('new-image').value || 'https://images.unsplash.com/photo-1580587771525-78b9dba3b914?w=800',
                lat: parseFloat(document.getElementById('new-lat').value),
                lng: parseFloat(document.getElementById('new-lng').value)
            };
            
            properties.push(newProperty);
            filteredProperties = [...properties];
            renderProperties();
            loadAdminProperties();
            hideAddPropertyForm();
            
            // Clear form
            document.getElementById('new-title-si').value = '';
            document.getElementById('new-title-en').value = '';
            document.getElementById('new-title-ta').value = '';
            document.getElementById('new-price').value = '';
            document.getElementById('new-location').value = '';
            document.getElementById('new-bedrooms').value = '';
            document.getElementById('new-bathrooms').value = '';
            document.getElementById('new-sqft').value = '';
            document.getElementById('new-description-si').value = '';
            document.getElementById('new-description-en').value = '';
            document.getElementById('new-description-ta').value = '';
            document.getElementById('new-image').value = '';
            document.getElementById('new-lat').value = '';
            document.getElementById('new-lng').value = '';
            
            alert('Property added successfully! / ‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∑Ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì!');
        }

        function deleteProperty(id) {
            if (confirm('Are you sure you want to delete this property? / ‡∂î‡∂∂‡∂ß ‡∂∏‡∑ô‡∂∏ ‡∂Ø‡∑ö‡∂¥‡∂Ω ‡∂∏‡∂ö‡∑è ‡∂Ø‡∑ê‡∂∏‡∑ì‡∂∏‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫‡∂Ø?')) {
                properties = properties.filter(p => p.id !== id);
                filteredProperties = [...properties];
                renderProperties();
                loadAdminProperties();
            }
        }

        // Initialize
        renderProperties();
    </script>
</body>
</html>
